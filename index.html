<!DOCTYPE html>
<html>
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Sync It</title>

<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&display=swap" rel="stylesheet">

<style>

body{
font-family:'Baloo 2', cursive;
background:white;
margin:0;
padding:10px;
text-align:center;
}

h1{
font-size:40px;
margin-bottom:10px;
}

.container{
max-width:500px;
margin:auto;
}

input, button{
font-family:'Baloo 2', cursive;
font-size:16px;
padding:10px;
margin:5px;
border-radius:10px;
}

button{
background:black;
color:white;
border:none;
}

ul{
padding:0;
}

li{
list-style:none;
background:#f2f2f2;
margin:5px;
padding:10px;
border-radius:10px;
display:flex;
align-items:center;
justify-content:space-between;
}

.calendar{
display:grid;
grid-template-columns:repeat(7,1fr);
gap:5px;
margin-top:10px;
}

.day{
padding:10px;
background:#f2f2f2;
border-radius:10px;
min-height:60px;
font-size:14px;
}

.today{
background:black;
color:white;
}

.event{
font-size:12px;
margin-top:5px;
}

</style>

</head>

<body>

<div class="container">

<h1>Sync It</h1>

<h2>Calendar</h2>

<button onclick="prevMonth()">◀</button>
<span id="monthLabel"></span>
<button onclick="nextMonth()">▶</button>

<div class="calendar" id="calendar"></div>

<input id="eventText" placeholder="Event text">
<input id="eventDate" type="date">
<button onclick="addEvent()">Add Event</button>


<h2>To Do List</h2>

<input id="taskInput" placeholder="New task">
<button onclick="addTask()">Add</button>

<ul id="todoList"></ul>

</div>

<script>

// STORAGE

let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
let events = JSON.parse(localStorage.getItem("events")) || {};


// TODO FUNCTIONS

function addTask(){

let input=document.getElementById("taskInput");

if(input.value==="") return;

tasks.push({
text:input.value,
done:false
});

localStorage.setItem("tasks",JSON.stringify(tasks));

input.value="";

renderTasks();

}

function toggleTask(index){

tasks[index].done=!tasks[index].done;

localStorage.setItem("tasks",JSON.stringify(tasks));

renderTasks();

}

function renderTasks(){

let list=document.getElementById("todoList");

list.innerHTML="";

tasks.forEach((task,index)=>{

let li=document.createElement("li");

let left=document.createElement("span");

left.innerHTML=`
<input type="checkbox" ${task.done?"checked":""}
onclick="toggleTask(${index})">
${task.done?"<s>"+task.text+"</s>":task.text}
`;

li.appendChild(left);

list.appendChild(li);

});

}

renderTasks();


// CALENDAR

let current=new Date();

function renderCalendar(){

let year=current.getFullYear();
let month=current.getMonth();

let firstDay=new Date(year,month,1).getDay();
let days=new Date(year,month+1,0).getDate();

document.getElementById("monthLabel").innerText=
current.toLocaleString("default",{month:"long",year:"numeric"});

let cal=document.getElementById("calendar");

cal.innerHTML="";

for(let i=0;i<firstDay;i++){
cal.innerHTML+="<div></div>";
}

for(let d=1;d<=days;d++){

let dateKey=`${year}-${month+1}-${d}`;

let div=document.createElement("div");

div.className="day";

let today=new Date();

if(
d===today.getDate() &&
month===today.getMonth() &&
year===today.getFullYear()
){
div.classList.add("today");
}

div.innerHTML=`${d}`;

if(events[dateKey]){
events[dateKey].forEach(ev=>{
div.innerHTML+=`<div class="event">${ev}</div>`;
});
}

cal.appendChild(div);

}

}

renderCalendar();

function prevMonth(){
current.setMonth(current.getMonth()-1);
renderCalendar();
}

function nextMonth(){
current.setMonth(current.getMonth()+1);
renderCalendar();
}


// EVENTS

function addEvent(){

let text=document.getElementById("eventText").value;
let date=document.getElementById("eventDate").value;

if(!text||!date) return;

let key=date;

if(!events[key]){
events[key]=[];
}

events[key].push(text);

localStorage.setItem("events",JSON.stringify(events));

renderCalendar();

}

</script>

</body>
</html>
